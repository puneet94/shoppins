!function(e){"use strict";var t=e.module("myApp",["ngRoute","ngMessages","ngSanitize","afkl.lazyImage","satellizer","ngFileUpload","ngMap","btford.socket-io","720kb.socialshare","authModApp","app.common","app.home","app.store","app.chat","app.admin","ngMaterial","app.review","app.product","app.user","app.offer","app.event"]);t.config(["$routeProvider","$mdThemingProvider",function(e,t){e.otherwise({redirectTo:"/home"})}]),t.run(["$rootScope","$location","$route","$timeout",function(e,t,o,r){e.config={},e.config.app_url=t.url(),e.config.app_path=t.path(),e.layout={},e.layout.loading=!1,e.$on("$routeChangeStart",function(){r(function(){e.layout.loading=!0})}),e.$on("$routeChangeSuccess",function(){r(function(){e.layout.loading=!1},1e3)}),e.$on("$routeChangeError",function(){alert("you are not authorized to view this page"),e.layout.loading=!1})}])}(window.angular),function(e){"use strict";function t(e,t,o,r){var n=e.defer();return o.isAuthenticated()?n.resolve():(t(function(){r.changeBrowserURLMethod("/")}),n.reject()),n.promise}function o(e,t,o,r,n){var a=e.defer();return r.getStore(t.current.params.storeId,{select:"admin"}).then(function(e){o.getUser()._id==e.data.admin?a.resolve():(a.reject(),n.changeBrowserURLMethod("/home"))},function(e){console.log(e)}),a.promise}e.module("app.admin",[]).config(["$routeProvider",function(e){e.when("/admin/createStore",{templateUrl:"app/admin/views/adminCreateStore.html",controller:"CreateStoreController",controllerAs:"csc",resolve:{redirectIfNotAuthenticated2:["$q","$timeout","$auth","changeBrowserURL",t]}}).when("/admin/adminStorePage/:storeId",{templateUrl:"app/admin/views/adminStorePage.html",controller:"AdminStoreController",controllerAs:"asc",resolve:{redirectIfNotAuthenticated2:["$q","$timeout","$auth","changeBrowserURL",t],redirectIfNotStoreAuthenticated:["$q","$route","userData","adminStoreService","changeBrowserURL",o]}}).when("/admin/adminCreateOffer/:storeId",{templateUrl:"app/admin/views/adminCreateOffer.html",resolve:{redirectIfNotAuthenticated2:["$q","$timeout","$auth","changeBrowserURL",t],redirectIfNotStoreAuthenticated:["$q","$route","userData","adminStoreService","changeBrowserURL",o]}}).when("/admin/adminEditOffer/:storeId/:offerId",{templateUrl:"app/admin/views/adminEditOffer.html",resolve:{redirectIfNotAuthenticated2:["$q","$timeout","$auth","changeBrowserURL",t],redirectIfNotStoreAuthenticated:["$q","$route","userData","adminStoreService","changeBrowserURL",o]}}).when("/admin/adminCreateEvent/:storeId",{templateUrl:"app/admin/views/adminCreateEvent.html",resolve:{redirectIfNotAuthenticated2:["$q","$timeout","$auth","changeBrowserURL",t],redirectIfNotStoreAuthenticated:["$q","$route","userData","adminStoreService","changeBrowserURL",o]}}).when("/admin/adminEditEvent/:storeId/:eventId",{templateUrl:"app/admin/views/adminEditEvent.html",resolve:{redirectIfNotAuthenticated2:["$q","$timeout","$auth","changeBrowserURL",t],redirectIfNotStoreAuthenticated:["$q","$route","userData","adminStoreService","changeBrowserURL",o]}})}])}(window.angular),function(e){"use strict";function t(e,t,r){var n="1068203956594250",a="http://www.ofline.in/authenticate";e.when("/signup",{templateUrl:"app/authentication/views/register.html",controller:"RegisterCtrl",controllerAs:"rcl",resolve:{redirectIfNotAuthenticated:["$q","$auth","$route","userData","changeBrowserURL",o]}}).when("/logout",{controller:"LogoutCtrl"}).when("/login",{templateUrl:"app/authentication/views/login.html",controller:"LoginController",controllerAs:"login",resolve:{redirectIfNotAuthenticated:["$q","$auth","$route","userData","changeBrowserURL",o]}}),r.loginUrl=a+"/login",r.signupUrl=a+"/signup",r.facebook({clientId:n,url:a+"/auth/facebook"})}function o(e,t,o,r,n){var a=e.defer();return t.isAuthenticated()?(a.reject(),n.changeBrowserURLMethod("/home")):a.resolve(),a.promise}e.module("authModApp",[]).config(["$routeProvider","$httpProvider","$authProvider",t])}(window.angular),function(e){"use strict";function t(e,t,o){var r=e.defer();return t.isAuthenticated()?r.resolve():(r.reject(),o.changeBrowserURLMethod("/home")),r.promise}function o(e,t,o,r,n){var a=e.defer(),i=o.current.params.creator1,s=o.current.params.creator2;return t.isAuthenticated()?s==i?(a.reject(),n.changeBrowserURLMethod("/home")):r.getUser()._id==i||r.getUser()._id==s?a.resolve():(a.reject(),n.changeBrowserURLMethod("/home")):(a.reject(),n.changeBrowserURLMethod("/home")),a.promise}e.module("app.chat",[]).config(["$routeProvider",function(e){e.when("/chatBox/:creator1/:creator2",{templateUrl:"app/chat/views/chatBox.html",controller:"ChatBoxController",controllerAs:"cbc",resolve:{redirectIfNotAuthenticated:["$q","$auth","$route","userData","changeBrowserURL",o]}}).when("/chatRooms",{templateUrl:"app/chat/views/chatRoomListPage.html",resolve:{redirectIfNotUserAuthenticated:["$q","$auth","changeBrowserURL",t]}})}])}(window.angular),function(e){"use strict";e.module("app.common",[])}(window.angular),function(e){"use strict";e.module("app.event",[]).config(["$routeProvider",function(e){e.when("/events/:location/:slug?",{templateUrl:"app/event/views/eventsPage.html",controller:"EventsPageController",controllerAs:"ospc"}).when("/event/:eventId",{templateUrl:"app/event/views/eventPage.html",controller:"EventPageController",controllerAs:"opc"})}])}(window.angular),function(e){"use strict";function t(e){e.when("/home",{templateUrl:"app/home/homePage.html",controller:"HomeController",controllerAs:"hm"})}e.module("app.home",[]).config(["$routeProvider",t])}(window.angular),function(e){"use strict";e.module("app.offer",[]).config(["$routeProvider",function(e){e.when("/offers/:location/:slug?",{templateUrl:"app/offer/views/offersPage.html",controller:"OffersPageController",controllerAs:"ospc"}).when("/offer/:offerId",{templateUrl:"app/offer/views/offerPage.html",controller:"OfferPageController",controllerAs:"opc"})}])}(window.angular),function(e){"use strict";e.module("app.product",[]).config(["$routeProvider",function(e){e.when("/productsCollectionName/:productName/:location/:slug?",{templateUrl:"app/product/views/productsNameCollection.html",controller:"ProductNameCollectionController",controllerAs:"pncc"}).when("/productsCollectionCategory/:category/:location/:slug?",{templateUrl:"app/product/views/productsCategoryCollection.html",controller:"ProductCategoryCollectionController",controllerAs:"pccc"}).when("/productsCollectionSubCategory/:subCategory/:location/:slug?",{templateUrl:"app/product/views/productsSubCategoryCollection.html",controller:"ProductSubCategoryCollectionController",controllerAs:"pscc"}).when("/product/singleProduct/:productId/:slug?",{templateUrl:"app/product/views/singleProduct.html",controller:"SingleProductController",controllerAs:"spc"}).when("/productsCollectionLocation/:location/:slug?",{templateUrl:"app/product/views/productsLocationCollection.html",controller:"ProductsLocationController",controllerAs:"plc"})}])}(window.angular),function(e){"use strict";e.module("app.review",[])}(window.angular),function(e){"use strict";e.module("app.store",[]).config(["$routeProvider",function(e){e.when("/store",{templateUrl:"app/store/storePost.html",controller:"StoreController",controllerAs:"sm"}).when("/store/storesCollection/storeName/:storeName/:location/:slug?",{templateUrl:"app/store/views/storesNameCollection.html",controller:"StoreNameCollectionController",controllerAs:"sncc"}).when("/store/storesCollection/category/:category/:location/:slug?",{templateUrl:"app/store/views/storesCategoryCollection.html",controller:"StoreCategoryCollectionController",controllerAs:"sccc"}).when("/store/storesCollection/location/:location/:slug?",{templateUrl:"app/store/views/storesLocationCollection.html",controller:"StoreLocationCollectionController",controllerAs:"slcc"}).when("/store/singleStore/:storeId/:myslug?",{templateUrl:"app/store/views/singleStore.html",controller:"SingleStoreController",controllerAs:"ssc"})}])}(window.angular),function(e){"use strict";function t(e,t,o){var r=e.defer();return t.isAuthenticated()?r.resolve():(r.reject(),o.changeBrowserURLMethod("/home")),r.promise}e.module("app.user",[]).config(["$routeProvider",function(e){e.when("/user/:userId",{templateUrl:"app/user/views/userProfilePage.html",controller:"UserPageController",controllerAs:"upc"}).when("/userProfileSettings",{templateUrl:"app/user/views/userProfileSettingsPage.html",resolve:{redirectIfNotUserAuthenticated:["$q","$auth","changeBrowserURL",t]}}).when("/userAccountSettings",{templateUrl:"app/user/views/userAccountSettingsPage.html",resolve:{redirectIfNotUserAuthenticated:["$q","$auth","changeBrowserURL",t]}}).when("/userMobileFeed",{templateUrl:"app/user/views/userMobileFeed.html",controller:"UserMobileFeedController",controllerAs:"umfc"}).when("/userMePage",{templateUrl:"app/user/views/userMePage.html",controller:"UserMePageController",controllerAs:"umpc",resolve:{redirectIfNotUserAuthenticated:["$q","$auth","changeBrowserURL",t]}})}])}(window.angular),function(e){"use strict";e.module("app.common",[])}(window.angular),function(e){"use strict";function t(e,t){this.getCities=function(){var o=this;return o.cityData=e.get(t.baseUrl+"store/cities"),o.cityData}}function o(e,t){this.getSearches=function(o){var r=this;r.searchesData=void 0;var n=e.baseUrl+"search/searches/"+o;return r.searchesData=t.get(n),r.searchesData},this.getAjaxSearches=function(o,r){var n=e.baseUrl+"search/searches/"+o+"/"+r;return t.get(n)}}function r(e){this.getService=function(t){return e.get(t)}}function n(){this.sortByKey=function(e,t){return e.sort(function(e,o){var r=e[t],n=o[t];return n>r?-1:r>n?1:0})}}function a(e){this.changeBrowserURLMethod=function(t,o){o&&e.path(t).search({param:o}),e.path(t)}}function i(){this.getArrayFunction=function(e,t){for(var o=[],r=e.length-1;r>=0;r--)o.push(e[r][t]);return o}}function s(){this.getUniqueCopyFunction=function(t,o){return e.forEach(t,function(e){-1==o.indexOf(e)&&o.push(e)}),o}}function l(){}function c(e,t){var o=e.localStorage,r={setCity:function(e){e&&e.toLowerCase()!==r.getCity().toLowerCase()&&(o.setItem("city",JSON.stringify(e)),t.$broadcast("city-changed"))},getCity:function(){return JSON.parse(o.getItem("city"))},isCityExists:function(){return r.getCity()?!0:!1}};return r}function u(e){this.baseUrl=this.baseUrl="localhost"==e.host()?e.protocol()+"://"+e.host()+":3000/":e.protocol()+"://"+e.host()+"/",this.currentUrl=e.absUrl().split("?")[0],this.currentUrlWQ=e.absUrl(),console.log("base"),console.log(this.baseUrl),this.getStoresWithCatgeoryLocation=this.baseUrl+"store/storesCollection/category/",this.getStoresWithNameLocation=this.baseUrl+"store/storesCollection/storeName/",this.getSingleStoreWithId=this.baseUrl+"store/singleStore/",this.getProductsWithCatgeoryLocation=this.baseUrl+"product/productsCollection/category/",this.getProductsWithSubCatgeoryLocation=this.baseUrl+"product/productsCollection/subCategory/",this.getProductsWithNameLocation=this.baseUrl+"product/productsCollection/productName/",this.getProductsWithStoreId=this.baseUrl+"product/productsCollection/store/",this.getSingleProductWithId=this.baseUrl+"product/singleProduct/",this.getCategoriesWithLocation=this.baseUrl+"categories/location"}function d(e,t){function o(o){return e.get(t.baseUrl+"store/areas/"+o)}this.getCityAreas=o}function g(e,t){function o(o){return e.get(t.baseUrl+"store/categories/"+o)}this.getCityCategories=o}function f(e,t){function o(o){return e.get(t.baseUrl+"product/areas/"+o)}this.getCityAreas=o}function p(e,t){function o(o){return e.get(t.baseUrl+"product/categories/"+o)}this.getCityCategories=o}function m(e,t){function o(o){return e.get(t.baseUrl+"product/subCategories/"+o)}this.getCitySubCategories=o}e.module("app.common").service("citiesService",["$http","baseUrlService",t]).service("getCategoryService",[function(){}]).service("searchService",["baseUrlService","$http",o]).service("httpService",["$http",r]).service("sortService",[n]).service("changeBrowserURL",["$location",a]).service("arrayObjectMapper",[i]).service("arrayUniqueCopy",[s]).service("userLocationService",[l]).service("baseUrlService",["$location",u]).service("getCityAreasService",["$http","baseUrlService",d]).service("getCityCategoriesService",["$http","baseUrlService",g]).service("getCityProductAreasService",["$http","baseUrlService",f]).service("getCityProductCategoriesService",["$http","baseUrlService",p]).service("getCityProductSubCategoriesService",["$http","baseUrlService",m]).factory("cityStorage",["$window","$rootScope",c])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/common/views/imagesList.html",scope:{imagesList:"="},link:function(e,t,o){}}}function o(){return{restrict:"E",replace:!0,templateUrl:"app/common/views/singleImage.html",scope:{image:"="},link:function(e,t,o){}}}function r(e){return{restrict:"A",link:function(t,o,r){t.$watch(function(){return t.$eval(r.bindHtmlCompile)},function(n){o.html(n&&n.toString());var a=t;r.bindHtmlScope&&(a=t.$eval(r.bindHtmlScope)),e(o.contents())(a)})}}}function n(e,t){return{restrict:"A",link:function(e,o,r){var n=t.path();$(o[0]).on("click",function(){$(r.toggleElement).slideToggle()});-1==n.indexOf("/home")}}}function a(e,t){return{restrict:"A",link:function(e,o,r){var n=0,a=t.path();-1==a.indexOf("/home")&&$(window).on("scroll",function(){if(windowWidth=window.innerWidth?window.innerWidth:$(window).width(),-1==a.indexOf("/home")&&$(window).scrollTop()>170&&windowWidth<=601&&-1==a.indexOf("/home")&&$(window).scrollTop()>170){var t=$(this).scrollTop();t>n?$(".scrollUpSearch").slideUp("fast"):$(".scrollUpSearch").slideDown("fast"),n=t,e.$apply()}})}}}function i(e,t){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){var t=window.innerWidth?window.innerWidth:$(window).width();961>=t&&($(o.toggleMobile).slideToggle(),e.$apply())})}}}function s(){return{restrict:"E",replace:!0,scope:{loading:"=loading"},template:'<div class="ajaxLoadingSpinnerDiv"><div class="ajaxLoadingSpinner"></div></div>',link:function(e,t,o){e.$watch("loading",function(e){e?$(t).show():$(t).hide()})}}}function l(){return{restrict:"E",replace:!0,scope:{loading:"=innerLoading",containerHeight:"@containerHeight"},templateUrl:"app/common/views/innerLoadingTemplate.html",link:function(e,t,o){e.$watch("loading",function(e){e?$(t).show():$(t).hide()}),$(".innerLoadingContainer").height(e.containerHeight)}}}function c(){return{restrict:"EA",replace:!0,scope:{smallLoading:"=smallLoading"},template:'<span style="position:relative"><div class="spinner"></div></span>',link:function(e,t,o){e.$watch("smallLoading",function(e){e?$(t).show():$(t).hide()})}}}function u(){return{restrict:"A",link:function(e,t,o){$("meta[name=Keywords]").attr("content"),$("meta[name=Description]").attr("content");console.log()}}}function d(){return{restrict:"E",scope:{upFn:"&upFn",downFn:"&downFn",upvChk:"&upvChk",smallLoading:"=smallLoading",currentReview:"=currentReview"},templateUrl:"app/reviews/views/likeReview.html"}}function g(){return{restrict:"E",scope:{upFn:"&upFn",downFn:"&downFn",upvChk:"&upvChk",smallLoading:"=smallLoading"},templateUrl:"app/user/views/userFollow.html"}}function f(){return{restrict:"A",link:function(e,t,o){$(t).css("background-image","url("+o.imageReplacementDirective+")")}}}e.module("app.common").directive("toggleElement",["$window","$location",n]).directive("scrollDown",["$window","$location",a]).directive("toggleMobile",["$window","$location",i]).directive("loadingDirective",[s]).directive("innerLoadingDirective",[l]).directive("metaTags",[u]).directive("likeDirective",[d]).directive("followDirective",[g]).directive("smallLoadingDirective",[c]).directive("bindHtmlCompile",["$compile",r]).directive("imageReplacementDirective",[f]).directive("imagesListDirective",[t]).directive("singleImageDirective",[o])}(window.angular),function(e){"use strict";e.module("app.review",[])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(){s.loading=!0,s.pageNo=s.pageNo+1,s.paramData={store:o.storeId,limit:100,page:1,populate:"store"},console.log(s.paramData),n.getEventCollection(s.paramData).then(function(e){console.log("events collection"),console.log(e),0===e.data.docs.length?s.noeventsToShow=!0:(s.noeventsToShow=!1,s.eventsList=e.data.docs),s.loading=!1},function(e){console.log(e)})}function i(){s.getEventsCollection()}var s=this;s.pageNo=0,s.eventsList=[],s.getEventsCollection=a,i()}e.module("app.event").controller("AdminEventsCollectionController",["$scope","$auth","$routeParams","changeBrowserURL","eventService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(){s.loading=!0,s.pageNo=s.pageNo+1,s.paramData={store:o.storeId,limit:100,page:1,populate:"store"},console.log(s.paramData),n.getOfferCollection(s.paramData).then(function(e){console.log("offers collection"),console.log(e),0===e.data.docs.length?s.nooffersToShow=!0:(s.nooffersToShow=!1,s.offersList=e.data.docs),s.loading=!1},function(e){console.log(e)})}function i(){s.getOffersCollection()}var s=this;s.pageNo=0,s.offersList=[],s.getOffersCollection=a,i()}e.module("app.offer").controller("AdminOffersCollectionController",["$scope","$auth","$routeParams","changeBrowserURL","offerService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(){o.getStore(t.storeId).then(function(e){i.storeData=e.data,i.loading=!1}),o.getStoreRating(t.storeId).then(function(e){i.storeData.storeRatingAvg=e.data})}var i=this;i.storeData={},a(),i.uploadStoreBanner=function(e,o){i.f=e,i.errFile=o&&o[0],e&&(i.bannerLoading=!0,e.upload=r.upload({url:n.baseUrl+"upload/storeBannerUpload/"+t.storeId,data:{file:e}}),e.upload.then(function(t){e.result=t.data,console.log(t.data),$(".adminStoreBannerImage").css("background-image","url("+t.data+")"),i.bannerLoading=!1}))}}e.module("app.admin").controller("AdminStoreController",["$scope","$routeParams","getSingleStore","Upload","baseUrlService",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a,i,s,l){function c(){d.eventForm.bannerImage=d.eventForm.bannerImage||d.eventForm.eventImages[0],s.createEvent(l.storeId,d.eventForm).then(function(e){console.log(e.data._id),userData.setUser(),a.show(a.alert().clickOutsideToClose(!0).title("Event created").textContent("Your Event has been created.").ariaLabel("Alert Dialog Demo").ok("Got it!")),i.url("/admin/adminEventPage/"+e.data._id)},function(e){console.log(e)})}function u(){}var d=this;d.eventForm={},d.eventForm.eventImages=[],d.eventForm.category=[],u(),d.createEvent=c,d.uploadSingleImage=function(e,t){d.f=e,d.errFile=t&&t[0],e&&(d.formBannerLoading=!0,e.upload=o.upload({url:n.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){e.result=t.data,d.uploadedImage=t.data,d.eventForm.bannerImage=d.uploadedImage,console.log("the banner image"),console.log(d.eventForm),d.formBannerLoading=!1}))},d.uploadMultipleImages=function(t){d.files=t,d.formImgListLoading=!0,e.forEach(t,function(e){d.formImgListLoading=!0,e.upload=o.upload({url:n.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){r(function(){e.result=t.data,console.log(t.data),d.eventForm.eventImages.push(t.data),d.formImgListLoading=!1})},function(e){e.status>0&&(d.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})}}e.module("app.admin").controller("CreateEventController",["$scope","Upload","$timeout","baseUrlService","$mdDialog","$location","adminEventService","$routeParams",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a,i,s,l){function c(){d.offerForm.bannerImage=d.offerForm.bannerImage||d.offerForm.offerImages[0],s.createOffer(l.storeId,d.offerForm).then(function(e){console.log(e.data._id),userData.setUser(),a.show(a.alert().clickOutsideToClose(!0).title("Offer created").textContent("Your Offer has been created.").ariaLabel("Alert Dialog Demo").ok("Got it!")),i.url("/admin/adminOfferPage/"+e.data._id)},function(e){console.log(e)})}function u(){}var d=this;d.offerForm={},d.offerForm.offerImages=[],d.offerForm.category=[],u(),d.createOffer=c,d.uploadSingleImage=function(e,t){d.f=e,d.errFile=t&&t[0],e&&(d.formBannerLoading=!0,e.upload=o.upload({url:n.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){e.result=t.data,d.uploadedImage=t.data,d.offerForm.bannerImage=d.uploadedImage,console.log("the banner image"),console.log(d.offerForm),d.formBannerLoading=!1}))},d.uploadMultipleImages=function(t){d.files=t,d.formImgListLoading=!0,e.forEach(t,function(e){d.formImgListLoading=!0,e.upload=o.upload({url:n.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){r(function(){e.result=t.data,console.log(t.data),d.offerForm.offerImages.push(t.data),d.formImgListLoading=!1})},function(e){e.status>0&&(d.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})}}e.module("app.admin").controller("CreateOfferController",["$scope","Upload","$timeout","baseUrlService","$mdDialog","$location","adminOfferService","$routeParams",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a,i,s){function l(){n.createProduct(u.productForm,t.storeId).then(function(e){s.show(s.alert().clickOutsideToClose(!0).title("Product created").textContent("Your Product has been created.").ariaLabel("Alert Dialog Demo").ok("Got it!")),r.reload()},function(e){console.log(e)})}function c(){}var u=this;u.productForm={},u.productForm.price={},u.productForm.category=[],u.productForm.subCategory=[],u.productForm.productImages=[],c(),u.createProduct=l,u.uploadMultipleImages=function(t){u.files=t,e.forEach(t,function(e){u.formImgListLoading=!0,e.upload=a.upload({url:i.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){o(function(){e.result=t.data,u.productForm.productImages.push(t.data),u.formImgListLoading=!1})},function(e){e.status>0&&(u.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})},u.uploadSingleImage=function(e,t){u.f=e,u.errFile=t&&t[0],e&&(u.formBannerLoading=!0,e.upload=a.upload({url:i.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){e.result=t.data,u.productForm.bannerImage=t.data,$(".productMainImage").css("background-image","url("+t.data+")"),u.formBannerLoading=!1}))}}e.module("app.admin").controller("CreateProductController",["$routeParams","$timeout","$route","adminProductService","Upload","baseUrlService","$mdDialog",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a,i,s,l){function c(){d.storeForm.bannerImage=d.storeForm.bannerImage||d.storeForm.storeImages[0],o.createStore(d.storeForm).then(function(e){console.log(e.data._id),n.setUser(),l.show(l.alert().clickOutsideToClose(!0).title("Store created").textContent("Your Store has been created.").ariaLabel("Alert Dialog Demo").ok("Got it!")),s.url("/admin/adminStorePage/"+e.data._id)},function(e){console.log(e)})}function u(){}var d=this;d.storeForm={},d.storeForm.storeImages=[],d.storeForm.category=[],d.storeForm.subCategory=[],u(),d.createStore=c,d.uploadSingleImage=function(e,t){d.f=e,d.errFile=t&&t[0],e&&(d.formBannerLoading=!0,e.upload=r.upload({url:i.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){e.result=t.data,d.uploadedImage=t.data,d.storeForm.bannerImage=d.uploadedImage,console.log("the banner image"),console.log(d.storeForm),$(".adminStoreBannerImage").css("background-image","url("+t.data+")"),d.formBannerLoading=!1}))},d.uploadMultipleImages=function(t){d.files=t,d.formImgListLoading=!0,e.forEach(t,function(e){d.formImgListLoading=!0,e.upload=r.upload({url:i.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){a(function(){e.result=t.data,console.log(t.data),d.storeForm.storeImages.push(t.data),d.formImgListLoading=!1})},function(e){e.status>0&&(d.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})}}e.module("app.admin").controller("CreateStoreController",["$auth","adminStoreService","Upload","userData","$timeout","baseUrlService","$location","$mdDialog",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a,i,s,l){function c(){d.eventForm.bannerImage=d.eventForm.bannerImage||d.eventForm.eventImages[0],l.updateEvent(i.eventId,i.storeId,d.eventForm).then(function(e){console.log(e.data._id),a.show(a.alert().clickOutsideToClose(!0).title("Event created").textContent("Your Event has been edited.").ariaLabel("Alert Dialog Demo").ok("Got it!")),s.url("/event/"+e.data._id)},function(e){console.log(e)})}function u(){l.getEvent(i.eventId,i.storeId).then(function(e){e.data.startDate=new Date(e.data.startDate),e.data.endDate=new Date(e.data.endDate),console.log(e),d.eventForm=e.data})}var d=this;d.eventForm={},d.eventForm.eventImages=[],d.eventForm.category=[],u(),d.createEvent=c,d.uploadSingleImage=function(e,t){d.f=e,d.errFile=t&&t[0],e&&(d.formBannerLoading=!0,e.upload=o.upload({url:n.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){e.result=t.data,d.uploadedImage=t.data,d.eventForm.bannerImage=d.uploadedImage,console.log("the banner image"),console.log(d.eventForm),$(".adminEventBannerImage").css("background-image","url("+t.data+")"),d.formBannerLoading=!1}))},d.uploadMultipleImages=function(t){d.files=t,d.formImgListLoading=!0,e.forEach(t,function(e){d.formImgListLoading=!0,e.upload=o.upload({url:n.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){r(function(){e.result=t.data,console.log(t.data),d.eventForm.eventImages.push(t.data),d.formImgListLoading=!1})},function(e){e.status>0&&(d.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})}}e.module("app.admin").controller("EditEventController",["$scope","Upload","$timeout","baseUrlService","$mdDialog","$routeParams","$location","adminEventService",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a,i,s,l){function c(){d.offerForm.bannerImage=d.offerForm.bannerImage||d.offerForm.offerImages[0],l.updateOffer(i.offerId,i.storeId,d.offerForm).then(function(e){console.log(e.data._id),a.show(a.alert().clickOutsideToClose(!0).title("Offer created").textContent("Your Offer has been edited.").ariaLabel("Alert Dialog Demo").ok("Got it!")),s.url("/offer/"+e.data._id)},function(e){console.log(e)})}function u(){l.getOffer(i.offerId,i.storeId).then(function(e){e.data.startDate=new Date(e.data.startDate),e.data.endDate=new Date(e.data.endDate),console.log(e),d.offerForm=e.data})}var d=this;d.offerForm={},d.offerForm.offerImages=[],d.offerForm.category=[],u(),d.createOffer=c,d.uploadSingleImage=function(e,t){d.f=e,d.errFile=t&&t[0],e&&(d.formBannerLoading=!0,e.upload=o.upload({url:n.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){e.result=t.data,d.uploadedImage=t.data,d.offerForm.bannerImage=d.uploadedImage,console.log("the banner image"),console.log(d.offerForm),$(".adminOfferBannerImage").css("background-image","url("+t.data+")"),d.formBannerLoading=!1}))},d.uploadMultipleImages=function(t){d.files=t,d.formImgListLoading=!0,e.forEach(t,function(e){d.formImgListLoading=!0,e.upload=o.upload({url:n.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){r(function(){e.result=t.data,console.log(t.data),d.offerForm.offerImages.push(t.data),d.formImgListLoading=!1})},function(e){e.status>0&&(d.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})}}e.module("app.admin").controller("EditOfferController",["$scope","Upload","$timeout","baseUrlService","$mdDialog","$routeParams","$location","adminOfferService",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a,i,s){function l(){o.updateProduct(r.storeId,a._id,u.productForm).then(function(e){console.log(e),n.show(n.alert().clickOutsideToClose(!0).title("Product Edited").textContent("Your Product has been edited.").ariaLabel("Alert Dialog Demo").ok("Got it!"))},function(e){console.log(e)})}function c(){}var u=this;u.productForm=a,c(),u.createProduct=l,u.uploadMultipleImages=function(t){u.files=t,e.forEach(t,function(e){u.formImgListLoading=!0,e.upload=i.upload({url:s.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){$timeout(function(){e.result=t.data,u.productForm.productImages.push(t.data),u.formImgListLoading=!1})},function(e){e.status>0&&(u.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})},u.uploadSingleImage=function(e,t){u.f=e,u.errFile=t&&t[0],e&&(u.formBannerLoading=!0,e.upload=i.upload({url:s.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){e.result=t.data,u.productForm.bannerImage=t.data,$(".productMainImage").css("background-image","url("+t.data+")"),u.formBannerLoading=!1}))}}e.module("app.admin").controller("EditProductController",["$auth","adminProductService","$routeParams","$mdDialog","product","Upload","baseUrlService",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a,i,s,l){function c(){r.updateStore(a.storeId,d.storeForm).then(function(e){console.log(e),l.show(l.alert().clickOutsideToClose(!0).title("Store edited").textContent("Your Store has been edited.").ariaLabel("Alert Dialog Demo").ok("Got it!")),o.reload()},function(e){console.log(e)})}function u(){r.getStore(a.storeId).then(function(e){e.data.category=e.data.category,e.data.subCategory=e.data.subCategory,e.data.keywords=e.data.keywords.join(","),console.log(e),d.storeForm=e.data})}var d=this;d.storeForm={},u(),d.createStore=c,d.uploadSingleImage=function(e,t){console.log("Enterd file uploading"),d.f=e,d.errFile=t&&t[0],e&&(d.formBannerLoading=!0,e.upload=n.upload({url:s.baseUrl+"upload/singleUpload",data:{file:e}}),d.spinnerLoading=!0,e.upload.then(function(t){e.result=t.data,d.storeForm.bannerImage=t.data,d.formBannerLoading=!1}))},d.uploadMultipleImages=function(t){d.files=t,e.forEach(t,function(e){d.formImgListLoading=!0,e.upload=n.upload({url:s.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){i(function(){e.result=t.data,console.log(t.data),d.storeForm.storeImages.push(t.data),d.formImgListLoading=!1})},function(e){e.status>0&&(d.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})}}e.module("app.admin").controller("EditStoreController",["$auth","$route","adminStoreService","Upload","$routeParams","$timeout","baseUrlService","$mdDialog",t])}(window.angular),function(e){"use strict";function t(){var e=this;e.tab=1,e.setTab=function(t){e.tab=t},e.isSet=function(t){return e.tab===t}}e.module("app.admin").controller("StoreStatisticsController",[t])}(window.angular),function(e){"use strict";function t(e,t){function o(o,r){return e.post(t.baseUrl+"admin/events/"+o,r)}function r(o,r,n){return e.put(t.baseUrl+"admin/event/"+r+"/"+o,n)}function n(o,r,n){return e.get(t.baseUrl+"admin/event/"+r+"/"+o,{params:n})}function a(){}this.createEvent=o,this.getEvent=n,this.updateEvent=r,this.deleteEvent=a}e.module("app.event").service("adminEventService",["$http","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o,r){return e.post(t.baseUrl+"admin/offers/"+o,r)}function r(o,r,n){return e.put(t.baseUrl+"admin/offer/"+r+"/"+o,n)}function n(o,r,n){return e.get(t.baseUrl+"admin/offer/"+r+"/"+o,{params:n})}function a(){}this.createOffer=o,this.getOffer=n,this.updateOffer=r,this.deleteOffer=a}e.module("app.offer").service("adminOfferService",["$http","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(o,r){return e.get(t.baseUrl)}function n(o,r){return e.post(t.baseUrl+"admin/products/"+r,o)}function a(o,r,n){return console.log("entered product update"),console.log(n),e.put(t.baseUrl+"admin/product/"+r+"/"+o,n)}function i(o,r){return e.get(t.baseUrl+"admin/product/"+o,{params:r})}function s(){}this.checkProductAdmin=r,this.createProduct=n,
this.getProduct=i,this.updateProduct=a,this.deleteProduct=s}e.module("app.admin").service("adminProductService",["$http","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(o,r){return e.get(t.baseUrl)}function n(o){return e.post(t.baseUrl+"admin/stores",o)}function a(o,r){return e.put(t.baseUrl+"admin/store/"+o,r)}function i(o,r){return e.get(t.baseUrl+"admin/store/"+o,{params:r})}function s(){}this.checkStoreAdmin=r,this.createStore=n,this.getStore=i,this.updateStore=a,this.deleteStore=s}e.module("app.admin").service("adminStoreService",["$http","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a,i,s){function l(){i.cancel()}function c(e){console.log("entered auth"),o.socialAuthenticate(e)}function u(){t.changeBrowserURLMethod("/")}function d(){t.changeBrowserURLMethod("/login")}function g(e){r.authenticate(e).then(function(e){s.setUser(e.data.user),alert("login with facebook successfull"),n.location.reload()})}function f(){r.logout(),s.removeUser(),u()}var p=this;p.toHomePage=u,p.authenticate=g,p.authLogout=f,p.loginPage=d,p.socialAuthenticate=c,p.cancelDialog=l,p.tab=1,p.setTab=function(e){p.tab=e},p.isSet=function(e){return p.tab===e},p.isAuth=r.isAuthenticated()}e.module("app.home").controller("AuthenticationModalController",["$scope","changeBrowserURL","userAuthService","$auth","$window","$route","$mdDialog","userData",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){function n(){e.path("/signup")}function a(){o.login(i.user).then(function(e){r.setUser(e.data.user),alert("Login successfull"),t.location.reload()},function(e){i.message=e.data.message,console.log(e)})}var i=this;i.user={},i.submitLogin=a,i.signUp=n,i.authenticate=function(t){o.authenticate(t),e.path("/")}}e.module("authModApp").controller("LoginController",["$location","$window","$auth","userData",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){o.signup(n.user).then(function(e){console.log(e),n.message=e.data.message},function(e){n.message=e.data.message,console.log(e)})}var n=this;n.user={},n.formSubmit=r}e.module("authModApp").controller("RegisterCtrl",["$scope","userData","$auth",t])}(window.angular),function(e){"use strict";e.module("authModApp").directive("sameAs",function(){return{require:"ngModel",restrict:"EA",link:function(e,t,o,r){function n(t){var n=t===e.$eval(o.sameAs);return r.$setValidity("equal",n),n?t:void 0}console.log(o),console.log(o.sameAs),r.$parsers.push(n),r.$formatters.push(n),e.$watch(o.sameAs,function(){r.$setViewValue(r.$viewValue)})}}})}(window.angular),function(e){"use strict";function t(t,o,r,n,a,i){function s(t){n.show({controller:"AuthenticationModalController",controllerAs:"amc",templateUrl:"app/authentication/views/authenticationModalTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0}).then(function(e){},function(){})}function l(e){o.authenticate(e).then(function(e){a.setUser(e.data.user),alert("login with facebook successfull"),i.location.reload()})}this.socialAuthenticate=l,this.showAuthenticationDialog=s}e.module("authModApp").service("userAuthService",["$http","$auth","baseUrlService","$mdDialog","userData","$window",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a){var i=e.localStorage,s={},l={setUser:function(e){if(e)i.setItem("user",JSON.stringify(e));else{var t=o.getPayload().sub;t&&r.get(n.baseUrl+"authenticate/user/"+t).then(function(e){l.isUserExists()&&i.removeItem("user"),i.setItem("user",JSON.stringify(e.data.user))},function(e){console.log(e)})}},getUser:function(){return JSON.parse(i.getItem("user"))},removeUser:function(){s=null,i.removeItem("user")},isUserExists:function(){return l.getUser()?!0:!1},getUserPage:function(e){var t="/user/"+e;a.changeBrowserURLMethod(t)}};return l}e.module("authModApp").factory("userData",["$window","$route","$auth","$http","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a){function i(){n.getChatMessages(c.chatRoomId).then(function(e){c.chatList=e.data[0].chats,$(".chatBoxUL").animate({scrollTop:99999999},"slow"),c.innerLoading=!1},function(e){console.log(e)})}function s(){n.getChatRoom().then(function(e){console.log("the response the room"),console.log(e),c.chatRoomId=e.data._id,c.receiverUserId=e.data.creator1==c.currentUser?e.data.creator2:e.data.creator1,console.log("the reciver id"+c.receiverUserId),l(),i(),a.getUserDetails(c.receiverUserId,{fields:"displayName firstName"}).then(function(e){console.log("the receiver"),console.log(e.data),c.receiverUser=e.data.displayName||e.data.firstName})},function(e){console.log(e)})}function l(){t.emit("addToRoom",{roomId:c.chatRoomId}),t.on("messageSaved",function(e){c.chatList.push(e),$(".chatBoxUL").animate({scrollTop:99999999},"slow")})}var c=this;c.currentUser=r.getUser()._id,c.receiverUser="",c.innerLoading=!0,c.chatRoomId="",c.messageLoading=!1,s(),c.sendMsg=function(e){if(13==e.which&&!e.shiftKey&&c.myMsg){c.messageLoading=!0;var t={message:c.myMsg,user:c.currentUser,roomId:c.chatRoomId};n.sendChatMessage(t).then(function(e){c.myMsg="",c.messageLoading=!1},function(e){console.log(e)})}},c.clickSubmit=function(){if(c.myMsg){c.messageLoading=!0;var e={message:c.myMsg,user:c.currentUser,roomId:c.chatRoomId};n.sendChatMessage(e).then(function(e){c.myMsg="",c.messageLoading=!1},function(e){console.log(e)})}}}e.module("app.chat").controller("ChatBoxController",["$scope","Socket","$routeParams","userData","chatService","userService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(e){n.changeBrowserURLMethod("/chatBox/"+e.creator1._id+"/"+e.creator2._id)}function i(){r.getChatRoomList(l.currentUser).then(function(e){l.chatRoomList=e.data,l.innerLoading=!1},function(e){console.log(e)})}function s(){i()}var l=this;l.currentUser=o.getUser()._id,l.innerLoading=!0,s(),l.openChatbox=a}e.module("app.chat").controller("ChatRoomListController",["$scope","$routeParams","userData","chatService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(t){return e.post(o.baseUrl+"chat/chats/"+t.roomId,t)}function n(t){return e.get(o.baseUrl+"chat/chats/"+t)}function a(){return e.get(o.baseUrl+"chat/chatBox/"+t.creator1+"/"+t.creator2)}function i(t){return e.get(o.baseUrl+"chat/chatRooms/"+t)}var s=this;s.sendChatMessage=r,s.getChatMessages=n,s.getChatRoom=a,s.getChatRoomList=i}e.module("app.chat").service("chatService",["$http","$routeParams","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t){return e({prefix:"",ioSocket:io.connect(t)})}e.module("app.chat").factory("Socket",["socketFactory","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t){return e({prefix:"",ioSocket:io.connect("/"+t.getUser()._id)})}e.module("app.chat").factory("SocketUserService",["socketFactory","userData",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a,i){function s(){i.share({provider:"facebook",attrs:{socialshareUrl:a.currentUrlWQ,socialshareText:"Offline Events",socialshareVia:"1068203956594250"}})}function l(){n.getSingleEvent(o.eventId).then(function(e){console.log("single event"),console.log(e),c.eventData=e.data,c.pos=c.eventData.address.latitude?[c.eventData.address.latitude,c.eventData.address.longitude]:[17.361625,78.474622]},function(e){console.log(e)})["catch"](function(e){console.log("Error: ",e)})["finally"](function(){console.log("This finally block")})}var c=this;c.eventData={},l(),c.shareFacebook=s,console.log("sd"+a.currentUrlWQ)}e.module("app.event").controller("EventPageController",["$scope","$auth","$routeParams","changeBrowserURL","eventService","baseUrlService","Socialshare",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(e){var t="event/"+e._id;r.changeBrowserURLMethod(t)}function i(){l.loading=!0,l.pageNo=l.pageNo+1;o.location;l.paramData={store:o.storeId,limit:100,page:1,populate:"store"},n.getEventCollection(l.paramData).then(function(e){console.log("events collection"),console.log(e),0===e.data.docs.length?l.noeventsToShow=!0:(l.noeventsToShow=!1,l.eventsList=e.data.docs),l.loading=!1},function(e){console.log(e)})}function s(){l.getEventsCollection()}var l=this;l.pageNo=0,l.eventsList=[],l.getSingleevent=a,l.getEventsCollection=i,s(),e.$on("parent",function(e,t){l.pageNo=0,l.paramData=t,l.geteventsCollection()})}e.module("app.event").controller("EventsCollectionController",["$scope","$auth","$routeParams","changeBrowserURL","eventService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(){}a()}e.module("app.event").controller("EventsPageController",["$scope","$auth","$routeParams","changeBrowserURL","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e){return{restrict:"E",replace:!0,templateUrl:"app/event/views/eventSuggestionListTemplate.html",scope:{eventLimit:"=eventLimit",eventCity:"=eventCity"},link:function(e,t,o){},controller:function(t){var o={page:1,limit:t.eventLimit,city:t.eventCity};e.getEventCollection(o).then(function(e){console.log("events"),console.log(e),t.eventSuggestions=e.data.docs},function(e){console.log("error"),console.log(e)}),t.eventDir={}}}}e.module("app.event").directive("eventSuggestionList",["eventService",t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/event/views/singleEventTemplate.html",scope:{event:"=singleEvent",isAdminEvent:"@adminEvent"},link:function(e,t,o){},controller:function(e){function t(e){return Object.keys(e).map(function(t,o){return"latitude"!=t&&"longitude"!=t&&"_id"!=t?(console.log(t),e[t]):void 0})}e.eventDir={mapAddress:t}}}}function o(){return{restrict:"E",replace:!0,templateUrl:"app/event/views/singleEventVertTemplate.html",scope:{event:"=singleEvent"},link:function(e,t,o){},controller:function(e){function t(e){return Object.keys(e).map(function(t,o){return"latitude"!=t&&"longitude"!=t&&"_id"!=t?(console.log(t),e[t]):void 0})}e.eventDir={mapAddress:t}}}}e.module("app.event").directive("singleEventVertDirective",[o]).directive("singleEventDirective",[t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/event/views/singleEventSuggestionTemplate.html",scope:{suggestedEvent:"=suggestedEvent"},link:function(e,t,o){},controller:function(e){e.eventDir={}}}}e.module("app.event").directive("singleEventSuggestion",[t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return console.log(o),e.get(t.baseUrl+"event/collection",{params:o})}function r(o,r){return e.get(t.baseUrl+"event/event/"+o,{params:r})}this.getEventCollection=o,this.getSingleEvent=r}e.module("app.event").service("eventService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(e){o.showAuthenticationDialog(e)}function i(){t.logout(),n.removeUser(),r.location.reload()}function s(e){o.socialAuthenticate(e)}var l=this;l.authenticate=s,l.authLogout=i,l.showAuthenticationDialog=a,l.isAuth=t.isAuthenticated()}e.module("app.home").controller("AuthController",["$scope","$auth","userAuthService","$window","userData",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a,i,s,l){function c(e){return function(){l(e).toggle().then(function(){console.log("toggle "+e+" is done")})}}function u(){r.changeBrowserURLMethod("/")}function d(e){n.authenticate(e),u()}function g(){n.logout(),u()}function f(o){(i("sm")||i("xs"))&&t.customFullscreen;a.show({controller:"ModalFormLoginController",templateUrl:"app/home/views/modalFormLogin.html",parent:e.element(document.body),targetEvent:o,clickOutsideToClose:!0,fullscreen:p.customFullscreen}).then(function(e){t.status='You said the information was "'+e+'".'},function(){t.status="You cancelled the dialog."}),t.$watch(function(){return i("md")||i("xl")},function(e){p.customFullscreen=e===!0})}var p=this;p.toHomePage=u,p.authenticate=d,p.authLogout=g,p.showAdvanced=f,p.customFullscreen=void 0,p.isAuth=n.isAuthenticated(),p.isOpenLeft=function(){return l("left").isOpen()},p.toggleLeft=c("left")}e.module("app.home").controller("HeaderController",["$scope","userData","changeBrowserURL","$auth","$mdDialog","$mdMedia","$timeout","$mdSidenav",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(){l.getCategories()}function i(e){var t=o.getCity(),n=e+"-stores-in-"+t,a="/store/storesCollection/category/"+e+"/"+t+"/"+n;r.changeBrowserURLMethod(a)}function s(){l.categoryList=[],t.getCityCategories(o.getCity()).then(function(e){l.categoryList=e.data,l.innerLoading=!1})}var l=this;l.cateList=[],l.categLoadMore=!1,l.pageNo=0,l.getCategories=s,l.categoryLinkClicked=i,a(),l.innerLoading=!0,e.$on("city-changed",function(){l.getCategories()})}function o(e,t,o,r){}e.module("app.home").controller("HomeController",["$scope","citiesService","searchService","changeBrowserURL",o]).controller("CategoryListController",["$scope","getCityCategoriesService","cityStorage","changeBrowserURL","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o){console.log("inside the mdSidenav"),this.close=function(){t("left").close().then(function(){o.debug("close RIGHT is done")})}}e.module("app.home").controller("HomeLeftController",["$timeout","$mdSidenav","$log",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(e){o.showAuthenticationDialog(e)}var n=this;n.authCheck=t.isAuthenticated(),n.showAuthenticationDialog=r}e.module("app.home").controller("MobileFooterController",["$scope","$auth","userAuthService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){var n=this;n.isAuth=r.isAuthenticated()}e.module("app.home").controller("MobileHomePageController",["$scope","changeBrowserURL","cityStorage","$auth",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a,i,s){function l(){w.mobileSearchBoxVisible=!0}function c(e){e||(e={});var o=e.userSearchString.split("#&#")[1],r=e.userSearchString.split("#&#")[0],n=w.selectedItem;w.slug=r+"-"+o.split("-")[0]+"s-in-"+n,"store"==o?(w.url="/store/storesCollection/storeName/",t.location.href=s.baseUrl+"#"+w.url+r+"/"+n+"/"+w.slug):"store-category"==o?(w.url="/store/storesCollection/category/",t.location.href=s.baseUrl+"#"+w.url+r+"/"+n+"/"+w.slug):"product"==o?(w.url="/productsCollectionName/",t.location.href=s.baseUrl+"#"+w.url+r+"/"+n+"/"+w.slug):"product-category"==o?(w.url="/productsCollectionCategory/",t.location.href=s.baseUrl+"#"+w.url+r+"/"+n+"/"+w.slug):"product-subcategory"==o?(w.url="/productsCollectionSubCategory/",t.location.href=s.baseUrl+"#"+w.url+r+"/"+n+"/"+w.slug):-1!=o.trim().indexOf("products")?m():-1!=o.trim().indexOf("offers")?h():p()}function u(e,t){t.length>=1?a.getAjaxSearches(e,t).then(function(e){w.userSearches=[],w.userSearches=e.data}):w.selectedItem&&d(w.selectedItem)}function d(e){a.getSearches(e).then(function(e){var t={userSearchString:"All stores#&#stores#&#"+w.selectedItem},o={userSearchString:"All products#&#products#&#"+w.selectedItem},r={userSearchString:"All offers#&#offers#&#"+w.selectedItem};w.userSearches=e.data,w.userSearches.unshift(t,o,r)},function(e){console.log(e)})}function g(e){r.setCity(e),d(e)}function f(){-1!=w.cities.indexOf(w.selectedItem)&&(w.userSearchText&&0!==w.userSearchText.length||p())}function p(){w.url="/store/storesCollection/location";var e=w.selectedItem;w.slug="stores-in-"+e,t.location.href=s.baseUrl+"#"+w.url+"/"+e+"/"+w.slug}function m(){w.url="/productsCollectionLocation";var e=w.selectedItem;w.slug="products-in-"+e,t.location.href=s.baseUrl+"#"+w.url+"/"+e+"/"+w.slug}function h(){w.url="/offers";var e=w.selectedItem;w.slug="offers-in-"+e,t.location.href=s.baseUrl+"#"+w.url+"/"+e+"/"+w.slug}function v(){n.getCities().then(function(e){w.cities=e.data},function(e){w.cities=e})}var w=this;w.selectedItem=o.location?o.location:r.isCityExists()?r.getCity():"hyderabad",v(),w.userSearches=[],w.selectedItemChange=g,w.userSearchItemChange=c,w.locationSearch=f,w.userSearchTextChange=u,w.openSearchBox=l,e.$watch(function(){return w.userSearchSelectedItem},function(e){e&&c(e)}),w.selectedItemChange(w.selectedItem)}e.module("app.home").controller("SearchBoxController",["$scope","$window","$routeParams","cityStorage","citiesService","searchService","changeBrowserURL","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(e){o.changeBrowserURLMethod("/admin/adminStorePage/"+e)}function n(){t.getUserPage(t.getUser()._id)}function a(e,t){l=t,e(t)}function i(){o.changeBrowserURLMethod("/admin/createStore/")}function s(){c.user=t.getUser(),c.userProfilePic=t.getUser().picture,c.userStoresList=t.getUser().storeId}var l,c=this;c.openMenu=a,c.getUserPage=n,c.getAdminStore=r,c.createNewStore=i,s()}e.module("app.user").controller("UserActionListController",["$scope","userData","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t){var o,r=this;t.on("connect",function(){t.emit("addToSingleRoom",{roomId:e.getUser()._id})}),t.on("newMessageReceived",function(t){t.user._id==e.getUser()._id||(r.messageReceived=!0)}),r.openMenu=function(e,t){o=t,e(t),r.messageReceived=!1}}e.module("app.home").controller("UserChatNotificationController",["userData","Socket",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a,i){function s(){i.share({provider:"facebook",attrs:{socialshareUrl:a.currentUrlWQ,socialshareText:"Offline Offers",socialshareVia:"1068203956594250"}})}function l(){n.getSingleOffer(o.offerId).then(function(e){console.log("single offer"),console.log(e),c.offerData=e.data,c.pos=c.offerData.address.latitude?[c.offerData.address.latitude,c.offerData.address.longitude]:[17.361625,78.474622]},function(e){console.log(e)})["catch"](function(e){console.log("Error: ",e)})["finally"](function(){console.log("This finally block")})}var c=this;c.offerData={},l(),c.shareFacebook=s,console.log("sd"+a.currentUrlWQ)}e.module("app.offer").controller("OfferPageController",["$scope","$auth","$routeParams","changeBrowserURL","offerService","baseUrlService","Socialshare",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){}var n=this;n.pageNo=0,n.offersList=[],n.paramData={city:o.location,page:1,limit:10},r()}e.module("app.offer").controller("OffersCollectionController",["$scope","$auth","$routeParams",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(){}a()}e.module("app.offer").controller("OffersPageController",["$scope","$auth","$routeParams","changeBrowserURL","baseUrlService",t])}(window.angular),function(e){"use strict";function t(t){return{restrict:"E",replace:!0,templateUrl:"app/offer/views/offersListTemplate.html",scope:{paramData:"=paramData"},controller:["$scope",function(o){function r(){o.paramData.page=o.paramData.page+1,n()}function n(){o.spinnerLoading=!0,console.log("paramdata"),console.log(o.paramData),t.getOfferCollection(o.paramData).then(function(t){console.log(t),o.totalOffers=t.data.total,e.forEach(t.data.docs,function(e){o.offersList.push(e)}),o.spinnerLoading=!1})["catch"](function(e){console.log("error"),console.log(e)})}function a(){n()}o.offersList=[],o.loadMoreOffers=r,o.getOffers=n,a(),o.$on("filterClicked",function(){o.offersList=[],o.paramData.page=1,n()})}]}}e.module("app.offer").directive("offersList",["offerService",t])}(window.angular),function(e){"use strict";function t(e){return{restrict:"E",replace:!0,templateUrl:"app/offer/views/offerSuggestionListTemplate.html",scope:{offerLimit:"=offerLimit",offerCity:"=offerCity"},link:function(e,t,o){},controller:["$scope",function(t){var o={page:1,limit:t.offerLimit,city:t.offerCity};e.getOfferCollection(o).then(function(e){console.log("offers"),console.log(e),t.offerSuggestions=e.data.docs},function(e){console.log("error"),console.log(e)}),t.offerDir={}}]}}e.module("app.offer").directive("offerSuggestionList",["offerService",t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/offer/views/singleOfferTemplate.html",scope:{offer:"=singleOffer",isAdminOffer:"@adminOffer"},link:function(e,t,o){},controller:["$scope",function(e){function t(e){return Object.keys(e).map(function(t,o){return"latitude"!=t&&"longitude"!=t&&"_id"!=t?(console.log(t),e[t]):void 0})}e.offerDir={mapAddress:t}}]}}function o(){return{restrict:"E",replace:!0,templateUrl:"app/offer/views/singleOfferVertTemplate.html",scope:{offer:"=singleOffer"},link:function(e,t,o){},controller:["$scope",function(e){function t(e){return Object.keys(e).map(function(t,o){return"latitude"!=t&&"longitude"!=t&&"_id"!=t?(console.log(t),e[t]):void 0})}e.offerDir={mapAddress:t}}]}}e.module("app.offer").directive("singleOfferVertDirective",[o]).directive("singleOfferDirective",[t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/offer/views/singleOfferSuggestionTemplate.html",scope:{suggestedOffer:"=suggestedOffer"},link:function(e,t,o){},controller:["$scope",function(e){e.offerDir={}}]}}e.module("app.offer").directive("singleOfferSuggestion",[t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return console.log(o),e.get(t.baseUrl+"offer/collection",{params:o})}function r(o,r){return e.get(t.baseUrl+"offer/offer/"+o,{params:r})}this.getOfferCollection=o,this.getSingleOffer=r}e.module("app.offer").service("offerService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a){function i(t){a.show({controller:"FilterModalController",templateUrl:"app/store/views/filterModalTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0,locals:{filtersList:[{filterName:s.areaFilterName,filterNames:s.areas,filterModel:s.areaRadioModel}]}}).then(function(e){console.log(e)},function(){})}var s=this;s.location=r.location,s.productsSearchHeader=r.slug,s.areaRadioModel={},s.areaFilterName="area",s.showFilterDialog=i,s.paramData={city:s.location,page:1,limit:10,fields:"-store",category:r.category},n.setParamData(s.paramData),t.$on("filterClicked",function(){s.paramData=n.getParamData()}),o.getCityAreas(s.location).then(function(e){s.areas=e.data},function(e){console.log(e)})}e.module("app.product").controller("ProductCategoryCollectionController",["$scope","getCityProductAreasService","$routeParams","paramFactory","$mdDialog",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a,i){function s(e,t){var o="product/singleProduct/"+e._id;t&&n.changeBrowserURLMethod(o,t),n.changeBrowserURLMethod(o)}function l(){u.loading=!0,u.pageNo=u.pageNo+1;var e=r.location,t="";if(-1!=o.absUrl().indexOf("/productsCollectionCategory/")){var n=r.category;t="product/products/category/"+n+"/"+e+"/"+u.pageNo}else if(-1!=o.absUrl().indexOf("/productsCollectionSubCategory/")){var a=r.subCategory;t="product/products/subCategory/"+a+"/"+e+"/"+u.pageNo}else if(-1!=o.absUrl().indexOf("/productsCollectionName/")){var s=r.productName;t="product/products/name/"+s+"/"+e+"/"+u.pageNo}else-1!=o.absUrl().indexOf("/productsCollectionLocation/")&&(t="product/products/location/"+e+"/"+u.pageNo);i.getProductCollection(t,u.paramData).then(function(e){if(u.noProductsToShow=0===e.data.docs.length?!0:!1,u.totalProducts=e.data.total,0===u.productsList.length){for(var t=[],o=e.data.docs.length-1;o>=0;o--)t.push(e.data.docs[o]);u.productsList=t}else{u.paramData&&1==u.pageNo&&(u.productsList=[]);for(var r=e.data.docs.length-1;r>=0;r--)u.productsList.push(e.data.docs[r])}u.loading=!1},function(e){console.log(e)})}function c(){u.getProductsCollection()}var u=this;u.pageNo=0,u.productsList=[],u.getSingleProduct=s,u.getProductsCollection=l,u.productsSearchHeader=r.slug,console.log("inside product"),c(),e.$on("parent",function(e,t){u.pageNo=0,u.paramData=t,u.getProductsCollection()})}e.module("app.product").controller("ProductListController",["$scope","$auth","$location","$routeParams","changeBrowserURL","baseUrlService","getProductCollectionService",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a){function i(t){a.show({controller:"FilterModalController",templateUrl:"app/store/views/filterModalTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0,locals:{filtersList:[{filterName:s.areaFilterName,filterNames:s.areas,filterModel:s.areaRadioModel}]}}).then(function(e){console.log(e)},function(){})}var s=this;s.location=r.location,s.productsSearchHeader=r.slug,s.categoryRadioModel={},s.areaRadioModel={},s.areaFilterName="area",s.showFilterDialog=i,s.paramData={city:s.location,page:1,limit:10,fields:"-store",name:r.productName},n.setParamData(s.paramData),t.$on("filterClicked",function(){s.paramData=n.getParamData()}),o.getCityAreas(s.location).then(function(e){s.areas=e.data},function(e){console.log(e)})}e.module("app.product").controller("ProductNameCollectionController",["$scope","getCityProductAreasService","$routeParams","paramFactory","$mdDialog",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a,i){function s(t){i.show({controller:"FilterModalController",templateUrl:"app/store/views/filterModalTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0,locals:{filtersList:[{filterName:l.areaFilterName,filterNames:l.areas,filterModel:l.areaRadioModel},{filterName:l.categoryFilterName,filterNames:l.categories,filterModel:l.categoryRadioModel}]}}).then(function(e){console.log(e)},function(){})}var l=this;l.location=o.location,l.productsSearchHeader=o.slug,l.categoryRadioModel={},l.areaRadioModel={},l.areaFilterName="area",l.categoryFilterName="category",l.showFilterDialog=s,l.paramData={city:l.location,page:1,limit:10,fields:"-store"},a.setParamData(l.paramData),t.$on("filterClicked",function(){l.paramData=a.getParamData()}),r.getCityAreas(l.location).then(function(e){l.areas=e.data},function(e){console.log(e)}),n.getCityCategories(l.location).then(function(e){l.categories=e.data},function(e){console.log(e)})}e.module("app.product").controller("ProductsLocationController",["$scope","$routeParams","getCityProductAreasService","getCityProductCategoriesService","paramFactory","$mdDialog",t])}(window.angular),function(e){"use strict";function t(){}e.module("app.product").controller("ProductSubCategoryCollectionController",[t])}(window.angular),function(e){"use strict";function t(e,t,o,r){function n(){o.getSingleProduct(r.productId).then(function(e){a.product=e.data,o.getSingleProductStores({limit:10,page:1,name:a.product.name,fields:"store",populate:"store"}).then(function(e){console.log("the list of list"),console.log(e),a.productStoreList=e.data.docs.map(function(e){return e.store})})})}var a=this;a.authCheck=t.isAuthenticated(),n(),a.tab=1,a.setTab=function(e){a.tab=e},a.isSet=function(e){return a.tab===e}}e.module("app.product").controller("SingleProductController",["$scope","$auth","getProductsService","$routeParams",t])}(window.angular),function(e){"use strict";function t(e,t){var o=this;o.paramData={page:1,limit:10,fields:"-store",store:t.storeId}}e.module("app.product").controller("StoreProductListController",["$scope","$routeParams",t])}(window.angular),function(e){"use strict";function t(t,o){return{restrict:"E",replace:!0,templateUrl:"app/product/views/productListTemplate.html",scope:{paramData:"=paramData",adminProduct:"@adminProduct"},controller:["$scope",function(r){function n(){r.paramData.page=r.paramData.page+1,o.setParamData(r.paramData),a()}function a(){r.loading=!0,t.productsCollection(r.paramData).then(function(t){r.noProductsToShow=0===t.data.docs.length?!0:!1,r.totalProducts=t.data.total,e.forEach(t.data.docs,function(e){r.productsList.push(e)}),r.loading=!1})["catch"](function(e){console.log("error"),console.log(e)})}function i(){a()}r.productsList=[],r.loadMoreProducts=n,r.getProducts=a,r.paramData=o.getParamData(),i(),r.$on("filterClicked",function(){r.productsList=[],r.paramData=o.getParamData(),a()})}]}}e.module("app.product").directive("productsList",["getProductCollectionService","paramFactory",t])}(window.angular),function(e){"use strict";function t(t){return{restrict:"E",replace:!0,templateUrl:"app/product/views/singleProductTemplate.html",scope:{product:"=singleProduct",adminProduct:"@adminProduct"},link:function(e,t,o){},controller:["$scope",function(o){function r(o,r){t.show({controller:"EditProductController",templateUrl:"app/admin/views/adminEditProduct.html",parent:e.element(document.body),targetEvent:r,controllerAs:"csc",clickOutsideToClose:!0,fullscreen:!0,locals:{product:o}}).then(function(e){console.log(e)},function(){})}o.showProductEditModal=r}]}}e.module("app.product").directive("singleProductDirective",["$mdDialog",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o,r){return console.log(r),e.get(t.baseUrl+o,{params:r})}function r(o){return console.log(o),e.get(t.baseUrl+"product/collection",{params:o})}function n(){return e.get(t.baseUrl+"product/products/name/:name/:location/:pageNo",{params:paramData})}this.getProductCollection=o,this.getProductNameCollection=n,this.productsCollection=r}e.module("app.product").service("getProductCollectionService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){function n(t){var r=1;return e.get(o.baseUrl+"product/products/store/"+t+"/"+r)}function a(t){return e.get(o.baseUrl+"product/products/singleProduct/"+t)}function i(t){return e.get(o.baseUrl+"product/collection",{params:t})}function s(e,t){var o="product/singleProduct/"+e._id+"/"+(e.myslug||" ");t&&r.changeBrowserURLMethod(o,t),r.changeBrowserURLMethod(o)}this.getStoreProductsList=n,this.getSingleProduct=a,this.getSingleProductPage=s,this.getSingleProductStores=i}e.module("app.product").service("getProductsService",["$http","storeData","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a,i){function s(){f.getProductReviews()}function l(){a.getProductReviews().then(function(e){f.reviewList=e.data},function(e){})}function c(e){for(var t=parseInt(e.rating),o=[],r=0;t>r;r++)o.push(r);return o}function u(e){for(var t=e.upvotes,o=0;o<t.length;o++)if(-1!=f.userUpvotes.indexOf(t[o]))return f.currentUpvoteId=t[o],!0}function d(e){f.smallLoadingModel[e._id]=!0,a.submitUserReviewUpvote({reviewId:e._id,productId:o.productId,userId:i.getUser()._id}).then(function(t){e.upvotes.push(t.data.id),f.userUpvotes.push(t.data.id),i.setUser(),f.smallLoadingModel[e._id]=!1})}function g(e){f.smallLoadingModel[e._id]=!0,a.deleteUserReviewUpvote({reviewId:e._id,productId:o.productId,userId:i.getUser()._id}).then(function(t){e.upvotes.splice(e.upvotes.indexOf(t.data.id),1),i.setUser(),f.smallLoadingModel[e._id]=!1})}var f=this;f.activate=s,f.smallLoadingModel={},f.getProductReviews=l,f.getRating=c,f.userReviewUpvoted=u,f.authCheck=t.isAuthenticated(),f.submitUserReviewUpvote=d,f.deleteUserReviewUpvote=g,f.getUserPage=i.getUserPage,f.reviewParams={},f.reviewParams.getRating=c,f.reviewParams.userReviewUpvoted=u,f.reviewParams.submitUserReviewUpvote=d,f.reviewParams.deleteUserReviewUpvote=g,f.reviewParams.smallLoadingModel=f.smallLoadingModel,f.reviewParams.getRating=c,f.authCheck&&(f.userUpvotes=i.getUser().upvotes),f.submitUserReviewUpvote=d,f.activate()}e.module("app.review").controller("ProductReviewListController",["$scope","$auth","$routeParams","$route","changeBrowserURL","reviewService","userData",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(e){var t=6-e.currentTarget.attributes.value.nodeValue;s.review.rating=t}function i(){t.storeId?n.submitStoreReview(s.review).then(function(e){r.setUser(),o.reload()},function(e){}):t.productId&&n.submitProductReview(s.review).then(function(e){r.setUser(),o.reload()},function(e){})}var s=this;s.review={},s.user={},t.storeId?s.review.storeId=t.storeId:t.productId&&(s.review.productId=t.productId),
s.ratingClick=a,r.getUser()?(s.review.userId=r.getUser()._id,s.user.picture=r.getUser().picture,s.user.displayName=r.getUser().displayName):s.review.userId=e.getPayload().sub,s.submitReview=i}e.module("app.review").controller("ReviewSubmitController",["$auth","$routeParams","$route","userData","reviewService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a){function i(){g.getStoreReviews()}function s(){n.getStoreReviews().then(function(e){g.reviewList=e.data},function(e){})}function l(e){for(var t=parseInt(e.rating),o=[],r=0;t>r;r++)o.push(r);return o}function c(e){for(var t=e.upvotes,o=0;o<t.length;o++)if(-1!=g.userUpvotes.indexOf(t[o]))return g.currentUpvoteId=t[o],!0}function u(e){g.smallLoadingModel[e._id]=!0,n.submitUserReviewUpvote({reviewId:e._id,storeId:o.storeId,userId:a.getUser()._id}).then(function(t){e.upvotes.push(t.data.id),g.userUpvotes.push(t.data.id),a.setUser(),g.smallLoadingModel[e._id]=!1})}function d(e){g.smallLoadingModel[e._id]=!0,n.deleteUserReviewUpvote({reviewId:e._id,storeId:o.storeId,userId:a.getUser()._id}).then(function(t){e.upvotes.splice(e.upvotes.indexOf(t.data.id),1),a.setUser(),g.smallLoadingModel[e._id]=!1})}var g=this;g.activate=i,g.smallLoadingModel={},g.getStoreReviews=s,g.getRating=l,g.userReviewUpvoted=c,g.authCheck=t.isAuthenticated(),g.submitUserReviewUpvote=u,g.deleteUserReviewUpvote=d,g.getUserPage=a.getUserPage,g.reviewParams={},g.reviewParams.getRating=l,g.reviewParams.userReviewUpvoted=c,g.reviewParams.submitUserReviewUpvote=u,g.reviewParams.deleteUserReviewUpvote=d,g.reviewParams.smallLoadingModel=g.smallLoadingModel,g.reviewParams.getRating=l,g.authCheck&&(g.userUpvotes=a.getUser().upvotes),g.activate()}e.module("app.review").controller("StoreReviewListController",["$scope","$auth","$routeParams","$route","reviewService","userData",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a){function i(){g.getUserReviews()}function s(){o.getUserReviews().then(function(e){g.reviewList=e.data},function(e){})}function l(e){for(var t=parseInt(e.rating),o=[],r=0;t>r;r++)o.push(r);return o}function c(e){for(var t=e.upvotes,o=0;o<t.length;o++)if(-1!=g.userUpvotes.indexOf(t[o]))return g.currentUpvoteId=t[o],!0}function u(e){g.smallLoadingModel[e._id]=!0,o.submitUserReviewUpvote({reviewId:e._id,userId:r.getUser()._id}).then(function(t){e.upvotes.push(t.data.id),g.userUpvotes.push(t.data.id),r.setUser(),g.smallLoadingModel[e._id]=!1})}function d(e){g.smallLoadingModel[e._id]=!0,o.deleteUserReviewUpvote({reviewId:e._id,userId:r.getUser()._id}).then(function(t){e.upvotes.splice(e.upvotes.indexOf(t.data.id),1),r.setUser(),g.smallLoadingModel[e._id]=!1})}var g=this;g.activate=i,g.smallLoadingModel={},g.getUserReviews=s,g.getRating=l,g.userReviewUpvoted=c,g.authCheck=t.isAuthenticated(),g.submitUserReviewUpvote=u,g.deleteUserReviewUpvote=d,g.getUserPage=r.getUserPage,g.getSingleStorePage=n.getSingleStorePage,g.getSingleProductPage=a.getSingleProductPage,g.reviewParams={},g.reviewParams.getRating=l,g.reviewParams.userReviewUpvoted=c,g.reviewParams.submitUserReviewUpvote=u,g.reviewParams.deleteUserReviewUpvote=d,g.reviewParams.smallLoadingModel=g.smallLoadingModel,g.reviewParams.getRating=l,g.authCheck&&(g.userUpvotes=r.getUser().upvotes),g.submitUserReviewUpvote=u,g.activate()}e.module("app.review").controller("UserReviewListController",["$scope","$auth","reviewService","userData","getSingleStore","getProductsService",t])}(window.angular),function(e){"use strict";function t(e){return{replace:!0,scope:{reviewParams:"=reviewParams",review:"=review"},templateUrl:"app/reviews/views/singleReviewTemplate.html",link:function(t){t.authCheck=e.isAuthenticated()}}}e.module("app.review").directive("singleReviewDirective",["$auth",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(t){return e.post(o.baseUrl+"review/reviews/store/"+t.storeId,t)}function n(){var r=t.storeId;return e.get(o.baseUrl+"review/reviews/store/"+r)}function a(t){return e.post(o.baseUrl+"review/reviews/product/"+t.productId,t)}function i(){var r=t.productId;return e.get(o.baseUrl+"review/reviews/product/"+r)}function s(t){return console.log(t),e.post(o.baseUrl+"upvote/upvotes/review/",t)}function l(t){return e["delete"](o.baseUrl+"upvote/upvotes/review/",{params:t})}function c(){var r=t.userId;return e.get(o.baseUrl+"user/userReviews/"+r)}var u=this;u.submitStoreReview=r,u.getStoreReviews=n,u.submitUserReviewUpvote=s,u.deleteUserReviewUpvote=l,u.getProductReviews=i,u.submitProductReview=a,u.getUserReviews=c}e.module("app.review").service("reviewService",["$http","$routeParams","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(){i()}function i(){var e={location:l.currentCity,page:1,limit:10,sort:"-count"};n.categoryCollection(e).then(function(e){l.categoryBoxList=e.data.docs.map(function(e){var t={};return t.category=e,t.storesList=[],s(t),t})})}function s(e){var t={};t.location=l.currentCity,t.category=e.category,t.page=1,t.limit=6,n.storesCollection(t).then(function(t){e.storesList=t.data.docs})}var l=this;l.isAuth=r.isAuthenticated(),l.storeCategoryCollection=s,a(),l.categoryBoxList=[],l.currentCity=o.getCity()||"hyderabad"}e.module("app.home").controller("CategoryBoxListController",["$scope","changeBrowserURL","cityStorage","$auth","getStoreCollectionService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){t.cancel()}e.cancelDialog=r,e.filtersList=o,console.log("yoyooyy"),console.log(e.filtersList)}e.module("app.store").controller("FilterModalController",["$scope","$mdDialog","filtersList",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a,i,s,l,c,u){function d(){return Object.keys(f.storeData.address).map(function(e){return f.storeData.address[e]}).join(" ")}function g(t){l.show({controller:"UserStoreReportController",controllerAs:"usr",templateUrl:"app/store/views/userStoreReportTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0}).then(function(e){},function(){})}c.getMap().then(function(e){});var f=this;f.tab=1,f.setTab=function(e){f.tab=e},f.isSet=function(e){return f.tab===e},f.storeData={},f.loading=!0,f.authCheck=o.isAuthenticated(),f.authCheck&&(f.currentUserId=n.getUser()._id),f.getAddressString=d,f.showStoreReportDialog=g,f.storeImagesObj=[],t.showAlert=function(t){l.show(l.alert().parent(e.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Claim Business").textContent("If you are the owner of this store,then mail to us at shoppinsmail@gmail.com").ariaLabel("Alert Dialog Demo").ok("Got it!").targetEvent(t))},s.getStore(a.storeId).then(function(e){i.setStore(e.data),f.storeData=e.data,f.addressMap=f.storeData.address.area,f.pos=f.storeData.address.latitude?[f.storeData.address.latitude,f.storeData.address.longitude]:[17.361625,78.474622];for(var t=0;t<f.storeData.storeImages.length;t++){var o={};o.src=f.storeData.storeImages[t],f.storeImagesObj.push(o)}f.loading=!1,u.getStoreCollection("store/storesCollection/stores/"+f.storeData.address.city+"/1",{limit:9}).then(function(e){f.storeSuggestions=e.data.docs})}),s.getStoreRating(a.storeId).then(function(e){f.storeData.storeRatingAvg=e.data})}e.module("app.store").controller("SingleStoreController",["$scope","$auth","$location","userData","$routeParams","storeData","getSingleStore","$mdDialog","NgMap","getStoreCollectionService",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a,i){function s(t){i.show({controller:"FilterModalController",templateUrl:"app/store/views/filterModalTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0,locals:{filtersList:[{filterName:l.areaFilterName,filterNames:l.areas,filterModel:l.areaRadioModel}]}}).then(function(e){console.log(e)},function(){})}var l=this;l.location=o.location,l.storesSearchHeader=o.slug,l.areaRadioModel={},l.areaFilterName="area",l.showFilterDialog=s,l.paramData={city:l.location,page:1,limit:10,category:o.category},a.setParamData(l.paramData),t.$on("filterClicked",function(){l.paramData=a.getParamData()}),r.getCityAreas(l.location).then(function(e){l.areas=e.data},function(e){console.log(e)}),n.getCityCategories(l.location).then(function(e){l.categories=e.data},function(e){console.log(e)})}e.module("app.store").controller("StoreCategoryCollectionController",["$scope","$routeParams","getCityAreasService","getCityCategoriesService","paramFactory","$mdDialog",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a){function i(e,t){var r="store/singleStore/"+e._id+"/"+e.myslug;t&&o.changeBrowserURLMethod(r,t),o.changeBrowserURLMethod(r)}function s(){c.loading=!0,c.pageNo=c.pageNo+1;var e=t.location,o="";if(-1!=r.absUrl().indexOf("/category/")){var n=t.category;o="store/storesCollection/category/"+n+"/"+e+"/"+c.pageNo}else if(-1!=r.absUrl().indexOf("/storeName/")){var i=t.storeName;o="store/storesCollection/storeName/"+i+"/"+e+"/"+c.pageNo}else o="store/storesCollection/stores/"+e+"/"+c.pageNo;a.getStoreCollection(o,c.paramData).then(function(e){if(c.totalStores=e.data.total,console.log(e),0===c.storesList.length){for(var t=[],o=e.data.docs.length-1;o>=0;o--)t.push(e.data.docs[o]);c.storesList=t}else{c.paramData&&1==c.pageNo&&(c.storesList=[]);for(var r=e.data.docs.length-1;r>=0;r--)c.storesList.push(e.data.docs[r])}c.loading=!1},function(e){console.log(e)})}function l(){c.getStoresCollection()}var c=this;c.pageNo=0,c.storesList=[],c.getSingleStore=i,c.getStoresCollection=s,c.storesSearchHeader=t.slug,l(),e.$on("parent",function(e,t){c.pageNo=0,c.paramData=t,c.getStoresCollection()})}e.module("app.store").controller("StoreListController",["$scope","$routeParams","changeBrowserURL","$location","baseUrlService","getStoreCollectionService",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a,i){function s(t){i.show({controller:"FilterModalController",templateUrl:"app/store/views/filterModalTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0,locals:{filtersList:[{filterName:c.areaFilterName,filterNames:c.areas,filterModel:c.areaRadioModel},{filterName:c.categoryFilterName,filterNames:c.categories,filterModel:c.categoryRadioModel}]}}).then(function(e){console.log(e)},function(){})}function l(){r.getCityAreas(c.location).then(function(e){c.areas=e.data},function(e){console.log(e)}),n.getCityCategories(c.location).then(function(e){c.categories=e.data},function(e){console.log(e)})}var c=this;c.location=o.location,c.categoryRadioModel={},c.categoryFilterName="category",c.storesSearchHeader=o.slug,c.showFilterDialog=s,c.areaRadioModel={},c.areaFilterName="area",c.paramData={city:c.location,page:1,limit:5},a.setParamData(c.paramData),t.$on("filterClicked",function(){c.paramData=a.getParamData()}),l()}e.module("app.store").controller("StoreLocationCollectionController",["$scope","$routeParams","getCityAreasService","getCityCategoriesService","paramFactory","$mdDialog",t])}(window.angular),function(e){"use strict";function t(t,o,r,n,a){function i(t){a.show({controller:"FilterModalController",templateUrl:"app/store/views/filterModalTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0,locals:{filtersList:[{filterName:s.areaFilterName,filterNames:s.areas,filterModel:s.areaRadioModel}]}}).then(function(e){console.log(e)},function(){})}var s=this;s.location=o.location,s.storesSearchHeader=o.slug,s.areaRadioModel={},s.showFilterDialog=i,s.areaFilterName="area",s.paramData={city:s.location,page:1,limit:10,name:o.storeName},n.setParamData(s.paramData),t.$on("filterClicked",function(){s.paramData=n.getParamData()}),r.getCityAreas(s.location).then(function(e){s.areas=e.data},function(e){console.log(e)})}e.module("app.store").controller("StoreNameCollectionController",["$scope","$routeParams","getCityAreasService","paramFactory","$mdDialog",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(){n.submitFollow(l.follow).then(function(e){l.userStoreFollowed=!0,r.setUser()},function(e){console.log(e)})}function i(){n.deleteFollow(l.follow).then(function(e){l.userStoreFollowed=!1,r.setUser(),console.log(e)},function(e){console.log(e)})}function s(){l.follow.userId=r.getUser()._id,o.storeId?(l.entity=o.storeId,l.follow.storeId=o.storeId):o.productId&&(l.entity=o.productId,l.follow.productId=o.productId,l.getFollowParamObj.productId=o.productId),t.isAuthenticated()&&-1!=r.getUser().storeFollowing.indexOf(o.storeId)&&(l.userStoreFollowed=!0)}var l=this;l.follow={},l.followCheck=!1,l.getFollowParamObj={},l.submitFollow=a,l.deleteFollow=i,l.getFollowParamObj.userId=r.getUser()._id,l.userStoreFollowed=!1,s()}e.module("app.store").controller("UserStoreFollowController",["$scope","$auth","$routeParams","userData","userFollowService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a){function i(){a.hide()}function s(){a.cancel()}function l(){console.log(u.report),u.innerLoading=!0,n.submitStoreReport(u.report).then(function(e){u.innerLoading=!1,u.showReportForm=!1},function(e){console.log(e)})}function c(){console.log("the auth"),console.log(t.getPayload().sub)}var u=this;u.report={},u.getReportParamObj={},u.showReportForm=!0,u.submitUserReport=l,u.getReportParamObj.userId=r.getUser()._id,u.report.userId=r.getUser()._id,u.report.storeId=o.storeId,u.hideReportDialog=i,u.reportDialogCancel=s,e.answer=function(e){a.hide(e)},c()}e.module("app.store").controller("UserStoreReportController",["$scope","$auth","$routeParams","userData","userService","$mdDialog",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a){function i(){n.submitUpvote(c.upvote).then(function(e){c.userStoreUpvoted=!0,r.setUser()},function(e){console.log(e)})}function s(){n.deleteUpvote(c.upvoteId).then(function(e){c.userStoreUpvoted=!1,r.setUser()},function(e){console.log(e)})}function l(){if(c.upvote.userId=r.getUser()._id,o.storeId?(c.upvote.storeId=o.storeId,c.upvote.type="store"):o.productId&&(c.upvote.type="product",c.upvote.productId=o.productId),t.isAuthenticated())for(var e=a.getStore(),n=r.getUser(),i=0;i<e.upvotes.length;i++)for(var s=0;s<n.upvotes.length;s++)e.upvotes[i]==n.upvotes[s]&&(c.userStoreUpvoted=!0,c.upvoteId=e.upvotes[i],console.log(c.upvoteId))}var c=this;c.upvote={},c.upvoteCheck=!1,c.getUpvoteParamObj={},c.submitUpvote=i,c.deleteUpvote=s,c.getUpvoteParamObj.userId=r.getUser()._id,c.userStoreUpvoted=!1,l()}e.module("app.store").controller("UserStoreUpvoteController",["$scope","$auth","$routeParams","userData","userUpvoteService","storeData",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(){n.submitVisit(l.visit).then(function(e){r.setUser(),l.userStoreVisited=!0},function(e){console.log(e)})}function i(){n.deleteVisit(l.visit).then(function(e){r.setUser(),l.userStoreVisited=!1},function(e){console.log(e)})}function s(){l.visit.userId=r.getUser()._id,o.storeId?(l.entity=o.storeId,l.visit.storeId=o.storeId,l.getVisitParamObj.storeId=o.storeId):o.productId&&(l.entity=o.productId,l.visit.productId=o.productId,l.getVisitParamObj.productId=o.productId),t.isAuthenticated()&&n.getVisit(l.visit).then(function(e){e.data[0]&&e.data[0]._id&&(l.userStoreVisited=!0)},function(e){console.log(e)})}var l=this;l.visit={},l.visitCheck=!1,l.getVisitParamObj={},l.submitVisit=a,l.deleteVisit=i,l.getVisitParamObj.userId=r.getUser()._id,l.userStoreVisited=!1,s()}e.module("app.store").controller("UserStoreVisitController",["$scope","$auth","$routeParams","userData","userVisitService",t])}(window.angular),function(e){"use strict";function t(e,t){return{restrict:"E",templateUrl:"app/store/views/filterDirectiveTemplate.html",scope:{filterName:"@filterName",radioRepeat:"=radioRepeat",radioModel:"=radioModel"},controller:["$scope",function(o){o.paramData=t.getParamData(),o.clearClick=function(){delete o.radioModel[o.filterName],delete o.paramData[o.filterName],o.paramData.page=1,t.setParamData(o.paramData),e.$broadcast("filterClicked")},o.radioChange=function(){o.paramData[o.filterName]=o.radioModel[o.filterName],o.paramData.page=1,t.setParamData(o.paramData),e.$broadcast("filterClicked")}}]}}function o(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$(this).addClass(o.addClass)})}}}function r(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$(this).siblings().removeClass(o.siblingRemoveClass)})}}}function n(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$(this).siblings(".filterDirectiveRadioGroup").find(".filterRadioButton").removeClass(o.removeClass)})}}}e.module("app.store").directive("filterDirective",["$rootScope","paramFactory",t]).directive("addClass",[o]).directive("removeClass",[n]).directive("siblingRemoveClass",[r])}(window.angular),function(e){"use strict";function t(e){return{restrict:"A",link:function(t,o,r){console.log(o),console.log($(o).attr("src")),console.log(r.imageReplace),e(function(){$(o).attr("src",r.imageReplace)},1e3)}}}e.module("app.store").directive("imageReplace",["$timeout",t])}(window.angular),function(e){"use strict";function t(e){return{restrict:"A",link:function(t,o,r){$(o).on("click",function(){e.scrollToId(r.scrollToId)})}}}e.module("app.store").directive("scrollToId",["scrollToIdService",t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/store/views/singleStoreTemplate.html",scope:{store:"=store"},controller:["$scope",function(e){function t(){}e.getSingleStore=t}]}}e.module("app.store").directive("singleStore",[t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/store/views/singleStoreSuggestion.html",scope:{suggestedStore:"=suggestedStore"}}}e.module("app.store").directive("singleStoreSuggestion",[t])}(window.angular),function(e){"use strict";function t(t,o){return{restrict:"E",templateUrl:"app/store/views/storesListTemplate.html",scope:{paramData:"=paramData"},controller:["$scope",function(r){function n(){r.paramData.page=r.paramData.page+1,o.setParamData(r.paramData),a()}function a(){r.spinnerLoading=!0,t.storesCollection(r.paramData).then(function(t){r.totalStores=t.data.total,e.forEach(t.data.docs,function(e){r.storesList.push(e)}),r.spinnerLoading=!1})["catch"](function(e){console.log(e)})}function i(){a()}r.storesList=[],r.paramData=o.getParamData(),r.loadMoreStores=n,r.getStores=a,i(),r.$on("filterClicked",function(){r.storesList=[],r.paramData=o.getParamData(),a()})}]}}e.module("app.store").directive("storesList",["getStoreCollectionService","paramFactory",t])}(window.angular),function(e){"use strict";function t(){var e={};return e.paramData={},e.getParamData=function(){return e.paramData},e.setParamData=function(t){for(var o in t)e.paramData[o]=t[o]},e}e.module("app.store").factory("paramFactory",[t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(t,r){return e.get(o.baseUrl+t,{params:r})}function n(t){return e.get(o.baseUrl+"store/collection",{params:t})}function a(t){return e.get(o.baseUrl+"store/userSearch/storeCategories",{params:t})}this.getStoreCollection=r,this.storesCollection=n,this.categoryCollection=a}e.module("app.store").service("getStoreCollectionService",["$http","storeData","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){function n(t){var r={page:"1",limit:"10",obj:{x:"y"}};return e.get(o.baseUrl+"search/collections",{params:r}).then(function(e){console.log("testing basis"),console.log(e)}),e.get(o.baseUrl+"store/singleStore/"+t)}function a(t){return e.get(o.baseUrl+"review/ratings/store/"+t)}function i(e,t){var o="store/singleStore/"+e._id+"/"+(e.myslug||" ");t&&r.changeBrowserURLMethod(o,t),r.changeBrowserURLMethod(o)}this.getStore=n,this.getStoreRating=a,this.getSingleStorePage=i}e.module("app.store").service("getSingleStore",["$http","storeData","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(){function e(e){var t=$("body");console.log("Inside the service of scroll");var o=$("#"+e);console.log(o),t.animate({scrollTop:o.offset().top})}this.scrollToId=e}e.module("app.store").service("scrollToIdService",[t])}(window.angular),function(e){"use strict";function t(e){var t=e.localStorage,o={setStore:function(e){t.setItem("store",JSON.stringify(e))},getStore:function(){return JSON.parse(t.getItem("store"))},removeStore:function(){t.removeItem("store")}};return o}e.module("app.store").factory("storeData",["$window",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return e.get(t.baseUrl+"follow/followed",{params:o})}function r(o){return e.post(t.baseUrl+"store/submitStoreFollow",o)}function n(o){return e.post(t.baseUrl+"store/deleteStoreFollow",o)}this.submitFollow=r,this.deleteFollow=n,this.getFollow=o}e.module("app.store").service("userFollowService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return e.get(t.baseUrl+"upvote/upvoted",{params:o})}function r(o){return e.post(t.baseUrl+"upvote/upvotes/storeUpvote",o)}function n(o){return e["delete"](t.baseUrl+"upvote/upvotes/"+o)}this.submitUpvote=r,this.deleteUpvote=n,this.getUpvote=o}e.module("app.store").service("userUpvoteService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return e.get(t.baseUrl+"visit/visited",{params:o})}function r(o){return e.post(t.baseUrl+"visit/visits/store",o)}function n(o){return e["delete"](t.baseUrl+"visit/visits/",{params:o})}this.submitVisit=r,this.deleteVisit=n,this.getVisit=o}e.module("app.store").service("userVisitService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(e){n.changeBrowserURLMethod("/admin/adminStorePage/"+e)}function i(){r.getUserPage(r.getUser()._id)}function s(){t.logout(),r.removeUser(),o.location.reload()}function l(){n.changeBrowserURLMethod("/admin/createStore/")}function c(){u.user=r.getUser(),u.userProfilePic=r.getUser().picture,u.userStoresList=r.getUser().storeId}var u=this;u.getUserPage=i,u.getAdminStore=a,u.createNewStore=l,u.authLogout=s,u.authCheck=t.isAuthenticated()&&!r.getUser().facebook,c()}e.module("app.user").controller("UserAccountSettingsController",["$scope","$auth","$window","userData","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){n.loading=!0,o.getSingleUserActivity(t.userId).then(function(e){n.activityData+=e.data,n.loading=!1})}var n=this;n.loading=!0,n.activityData=" ",r()}e.module("app.user").controller("UserActivityListController",["$scope","$routeParams","activityService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){l.params.page+=1,l.getActivity(l.params)}function n(e){l.loading=!0,o.getUserFollowingActivity(t.getPayload().sub,e).then(function(e){l.activityData.push(e.data),console.log("from the activity"),console.log(e),l.loading=!1})}function a(e){l.loading=!0,o.getAllActivity(e).then(function(e){console.log("from the activity"),console.log(e),l.activityData.push(e.data),l.loading=!1})}function i(e){l.authCheck?l.getUserFollowingActivity(e):l.getAllActivity(e)}function s(){l.getActivity(l.params)}var l=this;l.loading=!0,l.authCheck=t.isAuthenticated(),l.activityData=[],l.params={page:1,limit:25},l.loadMoreFeed=r,l.getUserFollowingActivity=n,l.getAllActivity=a,l.getActivity=i,s()}e.module("app.user").controller("UserCustomFeedController",["$scope","$auth","activityService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){l.params.page+=1,l.getActivity(l.params)}function n(e){l.loading=!0,o.getUserFollowingActivity(t.getPayload().sub,e).then(function(e){l.activityData.push(e.data),console.log("from the activity"),console.log(e),l.loading=!1})}function a(e){l.loading=!0,o.getAllActivity(e).then(function(e){console.log("from the activity"),console.log(e),l.activityData.push(e.data),l.loading=!1})}function i(e){l.authCheck?l.getUserFollowingActivity(e):l.getAllActivity(e)}function s(){l.getActivity(l.params)}var l=this;l.loading=!0,l.authCheck=t.isAuthenticated(),l.activityData=[],l.params={page:1,limit:25},l.loadMoreFeed=r,l.getUserFollowingActivity=n,l.getAllActivity=a,l.getActivity=i,s()}e.module("app.user").controller("UserFeedController",["$scope","$auth","activityService","NgMap",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a){function i(){u.loading=!0,a.getUserFollowers(r.userId).then(function(e){u.followersList=e.data,u.loading=!1})}function s(e){a.submitUserFollow(n.getUser()._id,e).then(function(e){n.setUser()})}function l(e){a.deleteUserFollow(n.getUser()._id,e).then(function(e){n.setUser()})}function c(e){return u.authCheck?-1==n.getUser().following.indexOf(e)?!1:!0:void 0}var u=this;i(),u.loading=!0,u.authCheck=t.isAuthenticated(),u.followersList=[],u.currentUserFollowed=c,u.submitUserFollow=s,u.deleteUserFollow=l,u.getUserPage=n.getUserPage}e.module("app.user").controller("UserFollowersController",["$scope","$auth","$location","$routeParams","userData","userService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a){function i(){u.loading=!0,a.getUserFollowing(r.userId).then(function(e){u.followersList=e.data,u.loading=!1})}function s(e){a.submitUserFollow(n.getUser()._id,e).then(function(e){n.setUser()})}function l(e){a.deleteUserFollow(n.getUser()._id,e).then(function(e){n.setUser()})}function c(e){return u.authCheck?-1==n.getUser().following.indexOf(e)?!1:!0:void 0}var u=this;i(),u.loading=!0,u.authCheck=t.isAuthenticated(),u.followersList=[],u.currentUserFollowed=c,u.submitUserFollow=s,u.deleteUserFollow=l,u.getUserPage=n.getUserPage}e.module("app.user").controller("UserFollowingController",["$scope","$auth","$location","$routeParams","userData","userService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){s.params.page+=1,s.getActivity(s.params)}function n(e){s.loading=!0,o.getAllActivity(e).then(function(e){console.log("from the activity"),console.log(e),s.activityData.push(e.data),s.loading=!1})}function a(e){s.getAllActivity(e)}function i(){s.getActivity(s.params)}var s=this;s.loading=!0,s.activityData=[],s.params={page:1,limit:25},s.loadMoreFeed=r,s.getAllActivity=n,s.getActivity=a,i()}e.module("app.user").controller("UserLocalFeedController",["$scope","$auth","activityService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){}var n=this;n.loading=!0,n.authCheck=t.isAuthenticated(),r(),n.tab=1,n.setTab=function(e){n.tab=e,console.log("the tab"),console.log(n.tab)},n.isSet=function(e){return n.tab===e}}e.module("app.user").controller("UserMePageController",["$scope","$auth","userData",t])}(window.angular),function(e){"use strict";function t(e,t){function o(){}var r=this;r.loading=!0,r.authCheck=t.isAuthenticated(),o(),r.tab=1,r.setTab=function(e){r.tab=e,console.log("the tab"),console.log(r.tab)},r.isSet=function(e){return r.tab===e}}e.module("app.user").controller("UserMobileFeedController",["$scope","$auth",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n){function a(){return u.authCheck?o.userId==r.getUser()._id:void 0}function i(e){n.submitUserFollow(r.getUser()._id,e).then(function(e){r.setUser(),console.log(e)},function(e){console.log(e)})}function s(e){n.deleteUserFollow(r.getUser()._id,e).then(function(t){r.getUser().following.indexOf(e);r.setUser()},function(e){console.log(e)})}function l(e){return u.authCheck?-1!=r.getUser().following.indexOf(e)?!0:!1:void 0}function c(){u.loading=!0,n.getSingleUser(o.userId).then(function(e){u.currentUserData=e.data,u.loading=!1})}var u=this;c(),u.currentUserData={},u.loading=!0,u.authCheck=t.isAuthenticated(),u.submitUserFollow=i,u.deleteUserFollow=s,u.userFollowed=l,u.currentProfileUser=o.userId,u.authCheck&&(u.loggedUser=r.getUser()._id),u.currentUser=a}e.module("app.user").controller("UserPageController",["$scope","$auth","$routeParams","userData","userService",t])}(window.angular),function(e){"use strict";function t(e,t){function o(){}function r(e){t.getUsers(e).then(function(e){n.usersList=e.data.docs,console.log("the users list"),console.log(n.usersList),n.loading=!1})}var n=this;o(),n.loading=!0,e.$watch(function(){return n.userSuggestionsModel},function(e){r(e&&e.length>=2?{userSearch:e,limit:20,page:1}:{limit:20,page:1})})}e.module("app.user").controller("UserPageSuggestionController",["$scope","userService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){var n=this;n.spinnerLoading=!1,n.uploadFiles=function(e,a){console.log("Enterd file uploading"),n.f=e,n.errFile=a&&a[0],e&&(e.upload=t.upload({url:r.baseUrl+"user/upload/profileImage/"+o.getUser()._id,data:{file:e}}),n.spinnerLoading=!0,e.upload.then(function(t){e.result=t.data,o.setUser(),o.getUser().picture=t.data,console.log("the image received"),console.log(t.data),$(".userProfileImage").find("img").attr("src",t.data),n.spinnerLoading=!1}))}}e.module("app.user").controller("UserProfileImageController",["$scope","Upload","userData","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){function n(){i.userForm=o.getUser(),console.log("user data"),console.log(i.userForm)}function a(){console.log("updated form"),console.log(i.userForm),r.updateUser(i.userForm).then(function(e){console.log(e),o.setUser()},function(e){console.log(e)})}var i=this;i.authCheck=t.isAuthenticated(),i.updateUserProfile=a,n()}e.module("app.user").controller("UserProfileSettingsController",["$scope","$auth","userData","userService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,n,a){function i(){}i()}e.module("app.user").controller("UserStatisticsController",["$scope","$auth","$location","$routeParams","userData","userService",t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/user/views/userChangePasswordTemplate.html",scope:{},link:function(e,t,o){},controllerAs:"vm",controller:["$scope","userService",function(e,t){function o(){n.passwordChangedValue=!1,n.showIncorrectPassword=!1,t.checkUserPassword({password:n.user.oldPassword}).then(function(e){return n.passwordCheckValue=e.data,n.passwordCheckValue?void t.changeUserPassword({password:n.user.password}).then(function(e){console.log("the status"),console.log(e.data),n.passwordChangedValue=!0}):void(n.showIncorrectPassword=!0)}),n.showIncorrectPassword=!1}function r(){}var n=this;n.user={},n.checkCurrentPassword=r,n.changePassword=o}]}}e.module("app.user").directive("changePassword",[t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/user/views/userSuggestionList.html",scope:{usersList:"="},link:function(e,t,o){console.log("link"),console.log(e)},controllerAs:"vm",controller:["$scope","$auth","userService","userData",function(e,t,o,r){function n(e){o.submitUserFollow(r.getUser()._id,e).then(function(e){r.setUser()})}function a(e){s.authCheck&&o.deleteUserFollow(r.getUser()._id,e).then(function(e){r.setUser()})}function i(e){return s.authCheck?-1==r.getUser().following.indexOf(e)?!1:!0:void 0}var s=this;s.user={},s.loading=!0,s.authCheck=t.isAuthenticated(),s.currentUserFollowed=i,s.submitUserFollow=n,s.deleteUserFollow=a,s.getUserPage=r.getUserPage}]}}e.module("app.user").directive("userSuggestionList",[t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return e.get(t.baseUrl+"activity/singleUserActivity/"+o)}function r(o){return e.get(t.baseUrl+"activity/allActivity/",{params:o})}function n(o,r){return e.get(t.baseUrl+"activity/userFollowingActivity/"+o,{params:r})}this.getSingleUserActivity=o,this.getAllActivity=r,this.getUserFollowingActivity=n}e.module("app.user").service("activityService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(o){return e.get(t.baseUrl+"user/collection",{params:o});

}function n(o,r){return e.get(t.baseUrl+"user/user/"+o,{params:r})}function a(o){return e.get(t.baseUrl+"user/singleUser/"+o)}function i(o){return e.get(t.baseUrl+"review/ratings/store/"+o)}function s(o){return e.post(t.baseUrl+"user/submitStoreReport/",o)}function l(o,r){return e.post(t.baseUrl+"user/submitFollow/"+o+"/"+r)}function c(o,r){return e.post(t.baseUrl+"user/deleteFollow/"+o+"/"+r)}function u(o,r){return e.get(t.baseUrl+"user/checkFollow/"+o+"/"+r)}function d(o){return e.get(t.baseUrl+"user/userFollowers/"+o)}function g(o){return e.get(t.baseUrl+"user/userFollowing/"+o)}function f(o){return e.get(t.baseUrl+"user/singleUser/"+o,{params:{select:"name address.area address.locality"}})}function p(r){return console.log("the id"+o.getUser()._id),e.post(t.baseUrl+"user/updateUser/"+o.getUser()._id,r)}function m(r){return e.post(t.baseUrl+"user/checkPassword/"+o.getUser()._id,r)}function h(r){return e.post(t.baseUrl+"user/changePassword/"+o.getUser()._id,r)}this.getSingleUser=a,this.getUserDetails=n,this.getStoreRating=i,this.submitUserFollow=l,this.submitStoreReport=s,this.deleteUserFollow=c,this.checkUserFollow=u,this.getUserFollowers=d,this.getUserFollowing=g,this.getUserStores=f,this.updateUser=p,this.checkUserPassword=m,this.changeUserPassword=h,this.getUsers=r}e.module("app.user").service("userService",["$http","baseUrlService","userData",t])}(window.angular);